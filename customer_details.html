<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
  <nav class="navbar navbar-expand-lg ">
    <a class="navbar-brand mx-4 fs-2 fw-semibold " href="home.php">Car Rental System</a>
 </nav>

    <div class="container d-flex align-items-center justify-content-center  ">
        <div class="col-md-6">
            <h1 id="message"></h1>

            <form class="shadow-lg p-4 rounded mb-5">
                <h4 class="mb-4 text-primary">Register</h4>
                <div class="row mb-3">
                    <div class="col">
                        <label for="fullname" class="form-label">Full Name</label>
                        <input type="text" class="form-control" placeholder="Name" id="fullname" name="cname" required>
                    </div>
                    <div class="col">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" placeholder="Email" id="email" placeholder="example@example.com" name="c_email" required
                            oninput="email_check()">
                        <span id="spanemail" class="text-danger"></span>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <label for="phone" class="form-label">Phone Number</label>
                        <input type="text" class="form-control"  id="phone" placeholder="+91-xxx-xxx-xxxx" name="cphone" required
                            pattern="[0-9]{10}">
                    </div>
                    <div class="col">
                        <label for="address" class="form-label">Address</label>
                        <input type="text" class="form-control" placeholder="Address" id="address" name="caddress" required>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <label for="city" class="form-label">City</label>
                        <input type="text" class="form-control" placeholder="City" id="city" name="ccity" required>
                        
                    </div>
                    <div class="col">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" placeholder="Password" id="password" name="c_pass" required>
                    </div>
                </div>
                <input type="submit" class="btn btn-primary rounded-5 p-2 fs-5  my-4 form-control" Value="Sign up"
                id="signup_btn">
                <p class="mt-3">Already have an account? <a href="login.html" class="text-decoration-none fw-bold text-success">Login</a></p>
            </form>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script>
        $('form').submit(function (e) {
            $('#signup_btn').val('please Wait..')

            $.ajax({
                url: "login.php",
                type: "post",
                data: $('form').serialize(),
                success: function (result) {
                    Swal.fire({
                        title: "Register!",
                        text: "You registered successfully!",
                        icon: "success"
                    }).then(function () {
                        window.location.href = 'login.html';
                    })

                    $('#signup_btn').val('Sign up')
                    $('form')['0'].reset();
                },
                error: function (error) {
                    $('#message').html(result)
                }
            })

            e.preventDefault();

        })

        function email_check() {
            var ac_email = $('#email').val();
            $.ajax({
                url: "login.php",
                type: "post",
                data: { ac_email: ac_email },
                success: function (data) {
                    if (data.trim() === 'true') {
                        $('#signup_btn').prop('disabled', true);
                        $('#spanemail').html("Email already exists");
                        $('#spanemail').css("color", "red");
                        $('#email').focus();
                    } else {
                        $('#signup_btn').prop('disabled', false);
                        $('#spanemail').html("");
                        $('#spanemail').css("color", "black");
                    }
                }
            })
        }

        

        $(document).ready(function () {
            $("#fullname").keydown(function (event) {
                var inputValue = event.which;
                if ((inputValue > 64 && inputValue < 91) || (inputValue > 96 && inputValue < 123 || inputValue == 32 || inputValue == 8)) {
                    return true;
                }
                else {
                    return false;
                }
            });
        });

    </script>
</body>

</html>
